/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.2.0 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/requirejs/LICENSE
 */

//     Underscore.js 1.7.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

!function(){var requirejs,require,define;!function(global){function commentReplace(e,t,n,r){return r||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,u,c,l,f,h,d,g,p,m=n&&n.split("/"),v=w.map,y=v&&v["*"];if(e&&(e=e.split("/"),l=e.length-1,w.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&m&&(p=m.slice(0,m.length-1),e=p.concat(e)),t(e),e=e.join("/")),r&&v&&(m||y)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(c=a.slice(0,s).join("/"),m)for(u=m.length;u>0;u-=1)if(o=getOwn(v,m.slice(0,u).join("/")),o&&(o=getOwn(o,c))){f=o,h=s;break e}!d&&y&&getOwn(y,c)&&(d=getOwn(y,c),g=s)}!f&&d&&(f=d,h=g),f&&(a.splice(0,h,f),e=a.join("/"))}return i=getOwn(w.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===_.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(w.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),_.require.undef(e),_.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,u,c,l=null,f=t?t.name:null,h=e,d=!0,g="";return e||(d=!1,e="_@r"+(R+=1)),c=o(e),l=c[0],e=c[1],l&&(l=n(l,f,i),s=getOwn(M,l)),e&&(l?g=s&&s.normalize?s.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(g=n(e,f,i),c=o(g),l=c[0],g=c[1],r=!0,a=_.nameToUrl(g))),u=!l||s||r?"":"_unnormalized"+(j+=1),{prefix:l,name:g,parentMap:t,unnormalized:!!u,url:a,originalName:h,isDefine:d,id:(l?l+"!"+g:g)+u}}function s(e){var t=e.id,n=getOwn(q,t);return n||(n=q[t]=new _.Module(e)),n}function u(e,t,n){var r=e.id,i=getOwn(q,r);!hasProp(M,r)||i&&!i.defineEmitComplete?(i=s(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(M[r])}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(q,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function l(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(_.defQueueMap[t]=!0),I.push(e)}),globalDefQueue=[])}function f(e){delete q[e],delete k[e]}function h(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(q,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,M[o]),e.check()):h(a,t,n))}),n[r]=!0)}function d(){var e,t,n=1e3*w.waitSeconds,o=n&&_.startTime+n<(new Date).getTime(),a=[],s=[],u=!1,l=!0;if(!y){if(y=!0,eachProp(k,function(e){var n=e.map,c=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(c)?(t=!0,u=!0):(a.push(c),r(c));else if(!e.inited&&e.fetched&&n.isDefine&&(u=!0,!n.prefix))return l=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=_.contextName,c(e);l&&each(s,function(e){h(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||x||(x=setTimeout(function(){x=0,d()},50)),y=!1}}function g(e){hasProp(M,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function p(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return p(t,_.onScriptLoad,"load","onreadystatechange"),p(t,_.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(l();I.length;){if(e=I.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));g(e)}_.defQueueMap={}}var y,S,_,b,x,w={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},q={},k={},E={},I=[],M={},T={},O={},R=1,j=1;return b={require:function(e){return e.require?e.require:e.require=_.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?M[e.map.id]=e.exports:e.exports=M[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(w.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=getOwn(E,e.id)||{},this.map=e,this.shim=getOwn(w.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,_.startTime=(new Date).getTime();var e=this.map;return this.shim?void _.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;T[e]||(T[e]=!0,_.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=_.execCb(n,o,r,i)}catch(a){e=a}else i=_.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(M[n]=i,req.onResourceLoad)){var s=[];each(this.depMaps,function(e){s.push(e.normalizedMap||e)}),req.onResourceLoad(_,this.map,s)}f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(_.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var i,o,l,h=getOwn(O,this.map.id),d=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,p=_.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(d=r.normalize(d,function(e){return n(e,g,!0)})||""),o=a(e.prefix+"!"+d,this.map.parentMap),u(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),l=getOwn(q,o.id),void(l&&(this.depMaps.push(o),this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)})),l.enable()))):h?(this.map.url=_.nameToUrl(h),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(q,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&f(e.map.id)}),c(e)}),i.fromText=bind(this,function(n,r){var o=e.name,u=a(o),l=useInteractive;r&&(n=r),l&&(useInteractive=!1),s(u),hasProp(w.config,t)&&(w.config[o]=w.config[t]);try{req.exec(n)}catch(f){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+f,f,[t]))}l&&(useInteractive=!0),this.depMaps.push(u),_.completeLoad(o),p([o],i)}),void r.load(e.name,p,i,w))})),_.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(b,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=q[n],hasProp(b,n)||!r||r.enabled||_.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(q,e.id);t&&!t.enabled&&_.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},_={config:w,contextName:e,registry:q,defined:M,urlFetched:T,defQueue:I,defQueueMap:{},Module:S,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=w.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(w[t]||(w[t]={}),mixin(w[t],e,!0,!0)):w[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(O[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=_.makeShimExports(e)),n[t]=e}),w.shim=n),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(w.paths[n]=e.location),w.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(q,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&_.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,u){var l,f,h;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(b,n)?b[n](q[t.id]):req.get?req.get(_,n,t,o):(f=a(n,t,!1,!0),l=f.id,hasProp(M,l)?M[l]:c(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),_.nextTick(function(){v(),h=s(a(null,t)),h.skipMap=i.skipMap,h.init(n,r,u,{enabled:!0}),d()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),_.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(M,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(M,e)||hasProp(q,e)}}),t||(o.undef=function(e){l();var n=a(e,t,!0),i=getOwn(q,e);i.undefed=!0,r(e),delete M[e],delete T[n.url],delete E[e],eachReverse(I,function(t,n){t[0]===e&&I.splice(n,1)}),delete _.defQueueMap[e],i&&(i.events.defined&&(E[e]=i.events),f(e))}),o},enable:function(e){var t=getOwn(q,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(w.shim,e)||{},a=o.exports;for(l();I.length;){if(n=I.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);g(n)}if(_.defQueueMap={},r=getOwn(q,e),!t&&!hasProp(M,e)&&r&&!r.inited){if(!(!w.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));g([e,o.deps||[],o.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,o,a,s,u,c,l=getOwn(w.pkgs,e);if(l&&(e=l),c=getOwn(O,e))return _.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=w.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),i.splice(0,o,u);break}s=i.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":w.baseUrl)+s}return w.urlArgs&&!/^blob\:/.test(s)?s+w.urlArgs(e,s):s},load:function(e,t){req.load(_,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);_.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);if(!i(t.id)){var n=[];return eachProp(q,function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,function(e){return e.id===t.id?(n.push(r),!0):void 0})}),c(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},_.require=_.makeRequire(),_}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.2.0",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,i.onNodeCreated&&i.onNodeCreated(r,i,t,n),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("../../grunt/node_modules/requirejs/require",function(){}),function(){var e=this,t=e._,n=Array.prototype,r=Object.prototype,i=Function.prototype,o=n.push,a=n.slice,s=n.concat,u=r.toString,c=r.hasOwnProperty,l=Array.isArray,f=Object.keys,h=i.bind,d=function(e){return e instanceof d?e:this instanceof d?void(this._wrapped=e):new d(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports._=d):e._=d,d.VERSION="1.7.0";var g=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}};d.iteratee=function(e,t,n){return null==e?d.identity:d.isFunction(e)?g(e,t,n):d.isObject(e)?d.matches(e):d.property(e)},d.each=d.forEach=function(e,t,n){if(null==e)return e;t=g(t,n);var r,i=e.length;if(i===+i)for(r=0;i>r;r++)t(e[r],r,e);else{var o=d.keys(e);for(r=0,i=o.length;i>r;r++)t(e[o[r]],o[r],e)}return e},d.map=d.collect=function(e,t,n){if(null==e)return[];t=d.iteratee(t,n);for(var r,i=e.length!==+e.length&&d.keys(e),o=(i||e).length,a=Array(o),s=0;o>s;s++)r=i?i[s]:s,a[s]=t(e[r],r,e);return a};var p="Reduce of empty array with no initial value";d.reduce=d.foldl=d.inject=function(e,t,n,r){null==e&&(e=[]),t=g(t,r,4);var i,o=e.length!==+e.length&&d.keys(e),a=(o||e).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(p);n=e[o?o[s++]:s++]}for(;a>s;s++)i=o?o[s]:s,n=t(n,e[i],i,e);return n},d.reduceRight=d.foldr=function(e,t,n,r){null==e&&(e=[]),t=g(t,r,4);var i,o=e.length!==+e.length&&d.keys(e),a=(o||e).length;if(arguments.length<3){if(!a)throw new TypeError(p);n=e[o?o[--a]:--a]}for(;a--;)i=o?o[a]:a,n=t(n,e[i],i,e);return n},d.find=d.detect=function(e,t,n){var r;return t=d.iteratee(t,n),d.some(e,function(e,n,i){return t(e,n,i)?(r=e,!0):void 0}),r},d.filter=d.select=function(e,t,n){var r=[];return null==e?r:(t=d.iteratee(t,n),d.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r)},d.reject=function(e,t,n){return d.filter(e,d.negate(d.iteratee(t)),n)},d.every=d.all=function(e,t,n){if(null==e)return!0;t=d.iteratee(t,n);var r,i,o=e.length!==+e.length&&d.keys(e),a=(o||e).length;for(r=0;a>r;r++)if(i=o?o[r]:r,!t(e[i],i,e))return!1;return!0},d.some=d.any=function(e,t,n){if(null==e)return!1;t=d.iteratee(t,n);var r,i,o=e.length!==+e.length&&d.keys(e),a=(o||e).length;for(r=0;a>r;r++)if(i=o?o[r]:r,t(e[i],i,e))return!0;return!1},d.contains=d.include=function(e,t){return null==e?!1:(e.length!==+e.length&&(e=d.values(e)),d.indexOf(e,t)>=0)},d.invoke=function(e,t){var n=a.call(arguments,2),r=d.isFunction(t);return d.map(e,function(e){return(r?t:e[t]).apply(e,n)})},d.pluck=function(e,t){return d.map(e,d.property(t))},d.where=function(e,t){return d.filter(e,d.matches(t))},d.findWhere=function(e,t){return d.find(e,d.matches(t))},d.max=function(e,t,n){var r,i,o=-(1/0),a=-(1/0);if(null==t&&null!=e){e=e.length===+e.length?e:d.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],r>o&&(o=r)}else t=d.iteratee(t,n),d.each(e,function(e,n,r){i=t(e,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=e,a=i)});return o},d.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e){e=e.length===+e.length?e:d.values(e);for(var s=0,u=e.length;u>s;s++)r=e[s],o>r&&(o=r)}else t=d.iteratee(t,n),d.each(e,function(e,n,r){i=t(e,n,r),(a>i||i===1/0&&o===1/0)&&(o=e,a=i)});return o},d.shuffle=function(e){for(var t,n=e&&e.length===+e.length?e:d.values(e),r=n.length,i=Array(r),o=0;r>o;o++)t=d.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},d.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=d.values(e)),e[d.random(e.length-1)]):d.shuffle(e).slice(0,Math.max(0,t))},d.sortBy=function(e,t,n){return t=d.iteratee(t,n),d.pluck(d.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var m=function(e){return function(t,n,r){var i={};return n=d.iteratee(n,r),d.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};d.groupBy=m(function(e,t,n){d.has(e,n)?e[n].push(t):e[n]=[t]}),d.indexBy=m(function(e,t,n){e[n]=t}),d.countBy=m(function(e,t,n){d.has(e,n)?e[n]++:e[n]=1}),d.sortedIndex=function(e,t,n,r){n=d.iteratee(n,r,1);for(var i=n(t),o=0,a=e.length;a>o;){var s=o+a>>>1;n(e[s])<i?o=s+1:a=s}return o},d.toArray=function(e){return e?d.isArray(e)?a.call(e):e.length===+e.length?d.map(e,d.identity):d.values(e):[]},d.size=function(e){return null==e?0:e.length===+e.length?e.length:d.keys(e).length},d.partition=function(e,t,n){t=d.iteratee(t,n);var r=[],i=[];return d.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},d.first=d.head=d.take=function(e,t,n){return null!=e?null==t||n?e[0]:0>t?[]:a.call(e,0,t):void 0},d.initial=function(e,t,n){return a.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},d.last=function(e,t,n){return null!=e?null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0)):void 0},d.rest=d.tail=d.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},d.compact=function(e){return d.filter(e,d.identity)};var v=function(e,t,n,r){if(t&&d.every(e,d.isArray))return s.apply(r,e);for(var i=0,a=e.length;a>i;i++){var u=e[i];d.isArray(u)||d.isArguments(u)?t?o.apply(r,u):v(u,t,n,r):n||r.push(u)}return r};d.flatten=function(e,t){return v(e,t,!1,[])},d.without=function(e){return d.difference(e,a.call(arguments,1))},d.uniq=d.unique=function(e,t,n,r){if(null==e)return[];d.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=d.iteratee(n,r));for(var i=[],o=[],a=0,s=e.length;s>a;a++){var u=e[a];if(t)a&&o===u||i.push(u),o=u;else if(n){var c=n(u,a,e);d.indexOf(o,c)<0&&(o.push(c),i.push(u))}else d.indexOf(i,u)<0&&i.push(u)}return i},d.union=function(){return d.uniq(v(arguments,!0,!0,[]))},d.intersection=function(e){if(null==e)return[];for(var t=[],n=arguments.length,r=0,i=e.length;i>r;r++){var o=e[r];if(!d.contains(t,o)){for(var a=1;n>a&&d.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},d.difference=function(e){var t=v(a.call(arguments,1),!0,!0,[]);return d.filter(e,function(e){return!d.contains(t,e)})},d.zip=function(e){if(null==e)return[];for(var t=d.max(arguments,"length").length,n=Array(t),r=0;t>r;r++)n[r]=d.pluck(arguments,r);return n},d.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},d.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=d.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}for(;i>r;r++)if(e[r]===t)return r;return-1},d.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=e.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(e[r]===t)return r;return-1},d.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;r>o;o++,e+=n)i[o]=e;return i};var y=function(){};d.bind=function(e,t){var n,r;if(h&&e.bind===h)return h.apply(e,a.call(arguments,1));if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(a.call(arguments)));y.prototype=e.prototype;var i=new y;y.prototype=null;var o=e.apply(i,n.concat(a.call(arguments)));return d.isObject(o)?o:i}},d.partial=function(e){var t=a.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,o=r.length;o>i;i++)r[i]===d&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},d.bindAll=function(e){var t,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(t=1;r>t;t++)n=arguments[t],e[n]=d.bind(e[n],e);return e},d.memoize=function(e,t){var n=function(r){var i=n.cache,o=t?t.apply(this,arguments):r;return d.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},d.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},d.defer=function(e){return d.delay.apply(d,[e,1].concat(a.call(arguments,1)))},d.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:d.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var c=d.now();s||n.leading!==!1||(s=c);var l=t-(c-s);return r=this,i=arguments,0>=l||l>t?(clearTimeout(a),a=null,s=c,o=e.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(u,l)),o}},d.debounce=function(e,t,n){var r,i,o,a,s,u=function(){var c=d.now()-a;t>c&&c>0?r=setTimeout(u,t-c):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=d.now();var c=n&&!r;return r||(r=setTimeout(u,t)),c&&(s=e.apply(o,i),o=i=null),s}},d.wrap=function(e,t){return d.partial(t,e)},d.negate=function(e){return function(){return!e.apply(this,arguments)}},d.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},d.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},d.before=function(e,t){var n;return function(){return--e>0?n=t.apply(this,arguments):t=null,n}},d.once=d.partial(d.before,2),d.keys=function(e){if(!d.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)d.has(e,n)&&t.push(n);return t},d.values=function(e){for(var t=d.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},d.pairs=function(e){for(var t=d.keys(e),n=t.length,r=Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},d.invert=function(e){for(var t={},n=d.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},d.functions=d.methods=function(e){var t=[];for(var n in e)d.isFunction(e[n])&&t.push(n);return t.sort()},d.extend=function(e){if(!d.isObject(e))return e;for(var t,n,r=1,i=arguments.length;i>r;r++){t=arguments[r];for(n in t)c.call(t,n)&&(e[n]=t[n])}return e},d.pick=function(e,t,n){var r,i={};if(null==e)return i;if(d.isFunction(t)){t=g(t,n);for(r in e){var o=e[r];t(o,r,e)&&(i[r]=o)}}else{var u=s.apply([],a.call(arguments,1));e=new Object(e);for(var c=0,l=u.length;l>c;c++)r=u[c],r in e&&(i[r]=e[r])}return i},d.omit=function(e,t,n){if(d.isFunction(t))t=d.negate(t);else{var r=d.map(s.apply([],a.call(arguments,1)),String);t=function(e,t){return!d.contains(r,t)}}return d.pick(e,t,n)},d.defaults=function(e){if(!d.isObject(e))return e;for(var t=1,n=arguments.length;n>t;t++){var r=arguments[t];for(var i in r)void 0===e[i]&&(e[i]=r[i])}return e},d.clone=function(e){return d.isObject(e)?d.isArray(e)?e.slice():d.extend({},e):e},d.tap=function(e,t){return t(e),e};var S=function(e,t,n,r){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof d&&(e=e._wrapped),t instanceof d&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]===e)return r[o]===t;var a=e.constructor,s=t.constructor;if(a!==s&&"constructor"in e&&"constructor"in t&&!(d.isFunction(a)&&a instanceof a&&d.isFunction(s)&&s instanceof s))return!1;n.push(e),r.push(t);var c,l;if("[object Array]"===i){if(c=e.length,l=c===t.length)for(;c--&&(l=S(e[c],t[c],n,r)););}else{var f,h=d.keys(e);if(c=h.length,l=d.keys(t).length===c)for(;c--&&(f=h[c],l=d.has(t,f)&&S(e[f],t[f],n,r)););}return n.pop(),r.pop(),l};d.isEqual=function(e,t){return S(e,t,[],[])},d.isEmpty=function(e){if(null==e)return!0;if(d.isArray(e)||d.isString(e)||d.isArguments(e))return 0===e.length;for(var t in e)if(d.has(e,t))return!1;return!0},d.isElement=function(e){return!(!e||1!==e.nodeType)},d.isArray=l||function(e){return"[object Array]"===u.call(e)},d.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},d.each(["Arguments","Function","String","Number","Date","RegExp"],function(e){d["is"+e]=function(t){return u.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(e){return d.has(e,"callee")}),"function"!=typeof/./&&(d.isFunction=function(e){return"function"==typeof e||!1}),d.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},d.isNaN=function(e){return d.isNumber(e)&&e!==+e},d.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===u.call(e)},d.isNull=function(e){return null===e},d.isUndefined=function(e){return void 0===e},d.has=function(e,t){return null!=e&&c.call(e,t)},d.noConflict=function(){return e._=t,this},d.identity=function(e){return e},d.constant=function(e){return function(){return e}},d.noop=function(){},d.property=function(e){return function(t){return t[e]}},d.matches=function(e){var t=d.pairs(e),n=t.length;return function(e){if(null==e)return!n;e=new Object(e);for(var r=0;n>r;r++){var i=t[r],o=i[0];if(i[1]!==e[o]||!(o in e))return!1}return!0}},d.times=function(e,t,n){var r=Array(Math.max(0,e));t=g(t,n,1);for(var i=0;e>i;i++)r[i]=t(i);return r},d.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},d.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=d.invert(_),x=function(e){var t=function(t){return e[t]},n="(?:"+d.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};d.escape=x(_),d.unescape=x(b),d.result=function(e,t){if(null!=e){var n=e[t];return d.isFunction(n)?e[t]():n}};var w=0;d.uniqueId=function(e){var t=++w+"";return e?e+t:t},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},E=/\\|'|\r|\n|\u2028|\u2029/g,I=function(e){return"\\"+k[e]};d.template=function(e,t,n){!t&&n&&(t=n),t=d.defaults({},t,d.templateSettings);var r=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(E,I),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";
try{var a=new Function(t.variable||"obj","_",o)}catch(s){throw s.source=o,s}var u=function(e){return a.call(this,e,d)},c=t.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},d.chain=function(e){var t=d(e);return t._chain=!0,t};var M=function(e){return this._chain?d(e).chain():e};d.mixin=function(e){d.each(d.functions(e),function(t){var n=d[t]=e[t];d.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),M.call(this,n.apply(d,e))}})},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];d.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],M.call(this,n)}}),d.each(["concat","join","slice"],function(e){var t=n[e];d.prototype[e]=function(){return M.call(this,t.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}.call(this),define("configManager",["underscore"],function(e){"use strict";var t=function(){};return t.prototype=e.extend(t.prototype,{add:function(e){this._configs[e.uniqueId]=e},findConfigByApiUrl:function(t){return!!e.findWhere(this._configs,{apiUrl:t.toLowerCase()})},prepareConfig:function(t){var n=e.extend({},this._defaultConfig);return t&&(n=e.extend(n,t)),n},generateUniqueId:function(){return(new Date).getTime()+"r"+e.random(1,1e3)},_defaultConfig:{clientId:"default",apiUrl:"https://staging.api.telemetry.watchabc.go.com/api/ws/telemetry/v1/events",batchSending:!0,checkDelay:1e4,checkDelayIfServiceFails:6e4,senderTimeout:1e4,useLocalStorage:!0,maxLocalStorageRecords:500,maxMemoryStorageRecords:1e3,logEnabled:!0,fullLogEnabled:!0,maxRetry:3},_configs:{}}),new t}),define("TelemetryDataReceiver",["underscore"],function(e){"use strict";var t=function(e){this._config=e};return t.prototype=e.extend(t.prototype,{addEvent:function(e){if(this._config.log("dataReceiver : addEvent : ",e),this._triggerSessionActiveEvent(e),!this._config.batchSending)return void this._config.telemetrySchedulerInstance.sendData([e]);if(this._config.useLocalStorage)try{this._config.telemetryDataStorageInstance.saveEvent(e)}catch(t){this._config.log("Error during saving event to Storage: ",t),this._config.telemetryDataStorageInstance.addToMemoryStorage(e)}else this._config.telemetryDataStorageInstance.addToMemoryStorage(e)},_triggerSessionActiveEvent:function(e){this._config.radioChannel&&this._config.radioChannel.triggerEventAdded&&this._config.radioChannel.triggerEventAdded(e)}}),t}),define("TelemetryScheduler",["underscore"],function(e){"use strict";var t=function(e){this._config=e,this._localStorageItems={keys:[],values:[]},this._currentCheckDelay=this._config.checkDelay,this._retryCount=0,this._isSendingFlag=!1,this._sendingFlagRefreshInverval=null,this._schedulerTimeout=null};return t.prototype=e.extend(t.prototype,{checkAndSend:function(){this._config.fullLog("scheduler : _checkAndSend : called"),this._schedulerTimeout=null;var e=this._isSomebodySending();e&&this._config.fullLog("scheduler : _checkAndSend : somebody is sending data stored in localStorage"),this._config.useLocalStorage&&!e&&(this._setupSendingFlagInterval(),this._localStorageItems=this._config.telemetryDataStorageInstance.collectLocalStorageItems()),this._config.fullLog("scheduler : _checkAndSend : localStorage items: ",this._localStorageItems.values," memoryStorage items:",this._config.telemetryDataStorageInstance.getMemoryStorage());var t=[].concat(this._localStorageItems.values,this._config.telemetryDataStorageInstance.getMemoryStorage());t.length>0?(this._config.log("scheduler : _checkAndSend : trying to send "+t.length+" item(s)",t),this.sendData(t,this._onSendSuccess.bind(this),this._onSendError.bind(this))):(this._resetSendingFlagInterval(),this._config.fullLog("scheduler : _checkAndSend : nothing to send"),this._setupSchedulerTimeout())},_setupSendingFlagInterval:function(){this._setSendingFlag(!0),this._sendingFlagRefreshInverval=setInterval(this._setSendingFlag.bind(this,!0),2e3)},_resetSendingFlagInterval:function(t){return e.isNull(this._sendingFlagRefreshInverval)?(t&&this._setSendingFlag(!1),!1):(clearInterval(this._sendingFlagRefreshInverval),this._setSendingFlag(!1),this._sendingFlagRefreshInverval=null,!0)},_setupSchedulerTimeout:function(){e.isNull(this._schedulerTimeout)&&(this._schedulerTimeout=setTimeout(this.checkAndSend.bind(this),this._currentCheckDelay))},_onSendSuccess:function(){if(this._config.log("scheduler : _onSendSuccess : called"),this._localStorageItems.keys.length>0){try{this._config.telemetryDataStorageInstance.removeItemsFromLocalStorage(this._localStorageItems.keys)}catch(e){this._config.log("scheduler : onSendSuccess : error with localStorage.removeItem operation : ",e)}this._localStorageItems={keys:[],values:[]}}this._retryCount=0,this._config.telemetryDataStorageInstance.flushMemoryStorageBuffer(),this._resetSendingFlagInterval(!0)&&this._config.log("scheduler : _onSendSuccess : clear sendingFlagRefreshInverval"),this._currentCheckDelay===this._config.checkDelayIfServiceFails&&(this._config.log("scheduler : _onSendSuccess : Telemetry API Service is up now, switching checking interval to "+this._config.checkDelay/1e3+" seconds"),this._currentCheckDelay=this._config.checkDelay),this._setupSchedulerTimeout()},_onSendError:function(){this._config.log("scheduler : _onSendError : called"),this._retryCount++,this._config.log("scheduler : retry attempt #"+this._retryCount),this._retryCount>this._config.maxRetry&&(this._currentCheckDelay!==this._config.checkDelayIfServiceFails&&this._config.log("scheduler : max retry count reached, switching checking interval to "+this._config.checkDelayIfServiceFails/1e3+" seconds"),this._currentCheckDelay=this._config.checkDelayIfServiceFails),this._config.telemetryDataStorageInstance.concatMemoryStorageAndBuffer(),this._resetSendingFlagInterval(!0)&&this._config.log("scheduler : _onSendError : clear sendingFlagRefreshInverval"),this._setupSchedulerTimeout()},_isSomebodySending:function(){try{var e=JSON.parse(localStorage.getItem("dts_sending"))}catch(t){return!1}return e&&e.inProgress&&Math.abs((new Date).getTime()-e.sendingTimestamp)<=this._config.senderTimeout},_setSendingFlag:function(e){try{localStorage.setItem("dts_sending",JSON.stringify({inProgress:e,sendingTimestamp:(new Date).getTime()}))}catch(t){}this._isSendingFlag=e},getIsSendingFlag:function(){return this._isSendingFlag},sendData:function(e,t,n){this._config.telemetryServiceClientInstance.sendTelemetry(e,t,n)}}),t}),define("TelemetryDataStorage",["underscore"],function(e){"use strict";var t=function(e){this._config=e,this._memoryStorage=[],this._memoryStorageBuffer=[]};return t.prototype=e.extend(t.prototype,{_generateUniqueKey:function(){var t=new Date;return t="dts_ed_"+t.getTime()+"_"+e.random(1,1e3)},getMemoryStorage:function(){return this._memoryStorage},setMemoryStorage:function(e){this._memoryStorage=e},getMemoryStorageBuffer:function(){return this._memoryStorageBuffer},setMemoryStorageBuffer:function(e){this._memoryStorageBuffer=e},concatMemoryStorageAndBuffer:function(){this.setMemoryStorage([].concat(this.getMemoryStorage(),this.getMemoryStorageBuffer())),this.setMemoryStorageBuffer([])},flushMemoryStorageBuffer:function(){this.setMemoryStorage(this.getMemoryStorageBuffer()),this.setMemoryStorageBuffer([])},addToMemoryStorage:function(e){this._config.telemetrySchedulerInstance.getIsSendingFlag()?(this._config.log("dataStorage : addToMemoryStorage [buffer] : ",e),this.getMemoryStorageBuffer().push(e)):(this._config.log("dataStorage : addToMemoryStorage : ",e),this.getMemoryStorage().length>=this._config.maxMemoryStorageRecords&&(this.getMemoryStorage().splice(0,1),this._config.log("dataStorage : addToMemoryStorage : removing 1 item from MemoryStorage because limit is reached.")),this.getMemoryStorage().push(e))},collectLocalStorageItems:function(){var t={keys:[],values:[]};try{var n=Object.keys(localStorage)}catch(r){n=[],this._config.log("dataStorage : collectItems : error with collecting items from localStorage : ",r)}var i;return e.each(n,function(e){if(e&&0===e.indexOf("dts_ed_")){if(i=localStorage.getItem(e),!i)return void localStorage.removeItem(e);try{i=JSON.parse(i),i&&(t.keys.push(e),t.values.push(i))}catch(n){this._config.log("dataStorage : collectItems : removed non-JSON record : "+e+" : ",localStorage.getItem(e)," : ",n),localStorage.removeItem(e)}}},this),t},countTelemetryItems:function(){var t=0;return e.each(Object.keys(localStorage),function(e){e&&0===e.indexOf("dts_ed_")&&t++}),t},removeItemsFromLocalStorageByCount:function(t){var n=0;e.each(Object.keys(localStorage),function(e){t>n&&e&&0===e.indexOf("dts_ed_")&&(localStorage.removeItem(e),n++)}),this._config.log("dataStorage : removeItemsFromLocalStorageByCount : "+t+" removed")},removeItemsFromLocalStorage:function(t){e.each(t,function(e){localStorage.removeItem(e)}),this._config.log("dataStorage : removeItemsFromLocalStorage : ",t," removed")},saveEvent:function(e){this.countTelemetryItems()>=this._config.maxLocalStorageRecords&&this.removeItemsFromLocalStorageByCount(1);var t=this._generateUniqueKey();localStorage.setItem(t,JSON.stringify(e)),this._config.log('dataStorage : saveEvent : localStorage key "'+t+'", eventData = ',e)}}),t}),define("TelemetryServiceClient",["underscore"],function(e){"use strict";var t=function(e){this._config=e,this._isRequestInProgress=!1,this._wasLastRequestFine=!0};return t.prototype=e.extend(t.prototype,{sendTelemetry:function(e,t,n){var r=new XMLHttpRequest;r.open("POST",this._config.apiUrl,!0),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){this._config.log("TelemetryServiceClient: sendTelemetry : request ",r),r.status>=200&&r.status<400?"function"==typeof t&&(t(),this._wasLastRequestFine=!0):"function"==typeof n&&(n(),this._wasLastRequestFine=!1),this._isRequestInProgress=!1}.bind(this),"function"==typeof n&&(r.onerror=function(){this._config.log("TelemetryServiceClient: sendTelemetry : error ",r),n(),this._isRequestInProgress=!1,this._wasLastRequestFine=!1}.bind(this)),this._isRequestInProgress=!0,r.send(JSON.stringify(e))},getIsRequestInProgress:function(){return this._isRequestInProgress},getWasLastRequestFine:function(){return this._wasLastRequestFine}}),t}),define("TelemetryDataSender",["underscore","configManager","TelemetryDataReceiver","TelemetryScheduler","TelemetryDataStorage","TelemetryServiceClient"],function(e,t,n,r,i,o){"use strict";var a=function(){var e="_";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}(),s=function(){this.version="1.0.0.6"};return s.prototype=e.extend(s.prototype,{initialize:function(s,u){var c=t.prepareConfig(s);return e.isNull(this._dataReceiver)?(c.useLocalStorage=c.useLocalStorage&&a,c.uniqueId=t.generateUniqueId(),c.radioChannel=u,c.telemetryDataReceiverInstance=new n(c),c.telemetrySchedulerInstance=new r(c),c.telemetryDataStorageInstance=new i(c),c.telemetryServiceClientInstance=new o(c),c.logEnabled&&console&&console.log?c.log=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];e.splice(0,0,"datgTS[uniqueId="+c.uniqueId+"]:");try{}catch(n){}}:c.log=function(){},c.fullLogEnabled?c.fullLog=c.log:c.fullLog=function(){},t.add(c),c.log("TelemetryDataSender is initialized with ",c),this._dataReceiver=c.telemetryDataReceiverInstance,c.telemetrySchedulerInstance.checkAndSend(),c.telemetryDataReceiverInstance):(c.logEnabled&&console&&console.log,this._dataReceiver)},_dataReceiver:null}),s}),require.config({baseUrl:".",paths:{underscore:"../../grunt/node_modules/underscore/underscore"}}),require(["TelemetryDataSender"],function(e){"use strict";window.datgTS=new e}),define("app",function(){})}();